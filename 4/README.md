# Flask Server Load Testing with Locust

## Описание 

Flask-сервер с несколькими маршрутами, который подвергается нагрузочному тестированию
с использованием инструмента "Locust". В проекте также реализован мониторинг ресурсов 
системы (CPU и RAM) во время выполнения тестов.

### Структура проекта
**3/server_simple.py** - Flask-сервер с маршрутами `/`, `/inverse` и `/unstable`.
**4/locustfile.py** - Скрипт для запуска нагрузочного тестирования с использованием Locust.
**run_tests.bat** - BAT-файл для автоматизации запуска сервера, проведения нагрузочного теста и мониторинга системы.
**requirements.txt** - Файл с зависимостями для установки необходимых библиотек.

## Требования:
Для запуска данного проекта вам потребуется установить следующие библиотеки и зависимости:
Python 3.8+
flask==3.0.3
flasgger==0.9.7.1
pytest==8.3.3
locust==2.31.8

Зависимости можно установить через `requirements.txt`:

bash pip install -r requirements.txt'

###                                 Инструкция по запуску
1. Установка зависимостей: pip install -r requirements.txt
2. Запуск тестов через BAT-скрипт: двойной клик мышкой по "run_tests.bat"/bush: .\run_tests.bat
Аналогично .sh файлы

Активирует виртуальную среду.
Запускает Flask-сервер на порту 5000.
Проводит нагрузочные тесты с помощью Locust: 10 пользователей с частотой 2 запроса
в секунду в течение 1 минуты.
Выполняет мониторинг загрузки CPU и свободной оперативной памяти.
Останавливает сервер Flask после завершения тестов.

3. Ручной запуск сервера и тестов
Если вы хотите запустить сервер и тесты вручную:

Активируйте виртуальную среду:
.venv\Scripts\activate
source .venv/bin/activate  # Для Linux/MacOS

Запустите Flask-сервер с указанием правильного пути к приложению:
flask --app 3/server_simple.py run

4. Запуск нагрузочного тестирования с Locust
Убедитесь, что Flask-сервер запущен (см. предыдущий пункт).
Откройте новую командную строку или вкладку терминала, 
и запустите Locust:

locust -f 4/locustfile.py --headless -u 10 -r 2 -t 1m --host=http://127.0.0.1:5000

Данная команда запустит нагрузочное тестирование с 10 пользователями, 
которые будут постепенно подключаться к серверу

Альтернатива(Запуск тестов через BAT-скрипт):
Клонируйте репозиторий на ваш локальный компьютер:

bash: git clone https://github.com/your_username/your_project.git
cd your_project

Установите все необходимые зависимости:
pip install -r 3\requirements.txt

Запустите тесты через BAT-файл:
run_tests.bat
./run_tests.sh  # Для Linux/MacOS

## Мои результаты
Результаты нагрузочного тестирования
Суммарное количество запросов: 382
Процент ошибок: 16.49% (основные ошибки возникали на маршруте /unstable,
который преднамеренно возвращает 400 Bad Request в случайных случаях)
Среднее время отклика: 6 мс
Максимальное время отклика: 82 мс (маршрут / показал самое высокое время отклика)
Средняя загрузка CPU: от 3% до 13% в зависимости от нагрузки
Свободная оперативная память: колебалась от 2460 до 2500 МБ